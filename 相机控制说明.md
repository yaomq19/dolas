# 相机控制系统使用说明

## 功能概述

我已经为您的Dolas引擎实现了完整的鼠标和键盘相机控制系统。现在您可以使用鼠标控制相机朝向，使用WASD键控制相机移动。

## 控制方式

### 鼠标控制
- **右键点击**: 切换鼠标捕获模式
  - 捕获模式开启时：鼠标被锁定在窗口中心，移动鼠标可以控制相机旋转
  - 捕获模式关闭时：鼠标可以自由移动，不影响相机
- **鼠标移动**: 
  - 水平移动：控制相机左右旋转（偏航角）
  - 垂直移动：控制相机上下旋转（俯仰角）

### 键盘控制
以下键盘控制只在鼠标捕获模式开启时有效：

- **W键**: 向前移动
- **S键**: 向后移动  
- **A键**: 向左移动
- **D键**: 向右移动
- **空格键**: 向上移动
- **Shift键**: 向下移动
- **ESC键**: 退出鼠标捕获模式

## 技术实现

### 新增文件
1. `source/manager/dolas_input_manager.h` - 输入管理器头文件
2. `source/manager/dolas_input_manager.cpp` - 输入管理器实现

### 修改文件
1. `source/render/dolas_render_camera.h` - 添加了相机控制接口
2. `source/render/dolas_render_camera.cpp` - 实现了鼠标和键盘控制逻辑
3. `source/manager/dolas_render_camera_manager.h` - 添加了输入处理方法
4. `source/manager/dolas_render_camera_manager.cpp` - 集成了输入处理逻辑
5. `source/core/dolas_rhi.cpp` - 更新了消息处理，将输入消息转发给输入管理器
6. `source/core/dolas_engine.cpp` - 集成了输入系统的初始化和更新
7. `source/core/dolas_math.h` - 添加了Vector2类定义
8. `source/core/dolas_math.cpp` - 实现了Vector2类

### 系统架构
- **InputManager**: 全局输入管理器，处理Windows消息并维护输入状态
- **RenderCamera**: 相机类新增了ProcessMouseInput和ProcessKeyboardInput方法
- **RenderCameraManager**: 在Tick方法中调用ProcessInput来处理输入并更新相机

## 参数调整

您可以在以下位置调整控制参数：

1. **鼠标灵敏度**: 在`dolas_render_camera_manager.cpp`的第68行
   ```cpp
   main_camera->ProcessMouseInput(mouse_delta.x, mouse_delta.y, 1.0f); // 最后一个参数是灵敏度
   ```

2. **移动速度**: 在`dolas_render_camera_manager.cpp`的第79-80行
   ```cpp
   main_camera->ProcessKeyboardInput(move_forward, move_backward, move_left, move_right,
                                   move_up, move_down, delta_time, 5.0f); // 最后一个参数是移动速度
   ```

## 使用方法

1. 编译并运行您的应用程序
2. 右键点击窗口激活鼠标捕获模式
3. 移动鼠标控制相机朝向
4. 使用WASD键移动相机位置
5. 按ESC键或再次右键点击退出控制模式

现在您的应用程序已经具备了完整的第一人称相机控制功能！
